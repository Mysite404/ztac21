<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZTAC Precision | Tactical Gear & Outdoor Equipment</title>
    <meta name="description" content="Premium tactical gear and outdoor equipment. Gear Up. Move Smart.">
    <link rel="icon" type="image/x-icon" href="/assets/img/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* [Previous CSS content remains exactly the same] */
        /* All your existing CSS styles should remain unchanged */
    </style>
</head>
<body>
    <!-- [Previous HTML content remains exactly the same until the script tag] -->
    <!-- All your existing HTML structure should remain unchanged -->

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ========== THEME TOGGLE ==========
            const themeToggle = document.querySelector('.theme-toggle');
            const currentTheme = localStorage.getItem('theme') || 'light';
            
            // Apply saved theme
            document.documentElement.setAttribute('data-theme', currentTheme);
            updateThemeIcon(currentTheme);
            
            themeToggle.addEventListener('click', () => {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                updateThemeIcon(newTheme);
            });
            
            function updateThemeIcon(theme) {
                const icon = theme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
                themeToggle.innerHTML = icon;
            }

            // ========== HERO SLIDER ==========
            const heroSlides = document.querySelectorAll('.hero-slider .slide');
            const heroDots = document.querySelectorAll('.slider-dots .dot');
            let currentHeroSlide = 0;
            let heroInterval;
            const heroVideo = document.querySelector('.hero-video');
            
            function showHeroSlide(index) {
                // Pause video if currently playing
                if (heroVideo) heroVideo.pause();
                
                heroSlides.forEach(slide => slide.classList.remove('active'));
                heroDots.forEach(dot => dot.classList.remove('active'));
                
                heroSlides[index].classList.add('active');
                heroDots[index].classList.add('active');
                currentHeroSlide = index;
                
                // If showing video slide, play it
                if (index === 0 && heroVideo) {
                    heroVideo.currentTime = 0;
                    heroVideo.play().catch(e => console.log("Video autoplay prevented:", e));
                }
            }
            
            function nextHeroSlide() {
                let nextIndex = (currentHeroSlide + 1) % heroSlides.length;
                showHeroSlide(nextIndex);
            }
            
            // Auto-rotate slides every 5 seconds
            function startSlider() {
                clearInterval(heroInterval);
                heroInterval = setInterval(nextHeroSlide, 5000);
            }
            
            // Manual slide control with dots
            heroDots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    clearInterval(heroInterval);
                    showHeroSlide(index);
                    startSlider();
                });
            });
            
            // Start the slider
            showHeroSlide(0);
            startSlider();

            // ========== PRODUCT MODAL ==========
            const modal = document.getElementById('productModal');
            const viewProductBtns = document.querySelectorAll('.view-product');
            const closeModal = document.querySelector('.close-modal');
            const productSlides = document.querySelectorAll('.product-slide');
            const modalProductTitle = document.getElementById('modal-product-title');
            const modalProductDesc = document.getElementById('modal-product-desc');
            const shopeeLink = document.getElementById('shopee-link');
            const sliderContainer = document.querySelector('.product-slider');

            let currentProduct = null;
            let currentSlideIndex = 0;

            // Remove old navigation if exists
            const oldNav = document.querySelector('.slider-nav');
            if (oldNav) oldNav.remove();

            // Create Instagram-style navigation
            sliderContainer.innerHTML += `
                <div class="instagram-nav">
                    <button class="instagram-arrow instagram-prev">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M15 18l-6-6 6-6"/>
                        </svg>
                    </button>
                    <div class="instagram-dots"></div>
                    <button class="instagram-arrow instagram-next">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6"/>
                        </svg>
                    </button>
                </div>
            `;

            const dotsContainer = document.querySelector('.instagram-dots');
            const prevBtn = document.querySelector('.instagram-prev');
            const nextBtn = document.querySelector('.instagram-next');

            // Product data
            const products = {
                1: {
                    title: "TOPI HUTAN (ZTC.RIMBA) - Loreng Tempatan",
                    description: "High-quality jungle hat with local camouflage pattern. Designed for durability and comfort in tropical environments.",
                    images: [
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasl-m9lqxv41t0l01f.webp",
                        "https://down-my.img.susercontent.com/file/my-11134207-7ras9-m9lqxv41t1457c",
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasj-m9lrh885nv1u29",
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasa-m9lrhbi2vape5d",
                        "https://down-my.img.susercontent.com/file/my-11134207-7rase-m9lrhf0vpq804a",
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasg-m9lrhhvtj37kb1",
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasm-m9lrhlzfj2tc13"
                    ],
                    shopee: "https://shopee.com.my/TOPI-HUTAN-(ZTC.RIMBA)-Loreng-Tempatan-i.178104872.18393125335"
                },
                2: {
                    title: "BOONIE HAT RIMBA ZTAC",
                    description: "Durable boonie hat designed for tactical and outdoor use. Features ventilation and a wide brim for sun protection.",
                    images: [
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasm-m9u5v82nl33m43",
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasd-m9u5v82njoj6e5",
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasf-m9u5v82xj9wya4",
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasj-mbkr4jc2fa1w75",
                        "https://down-my.img.susercontent.com/file/my-11134207-7rask-mbkr4jccevgx8a",
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasi-mbkr4jc2fa354b"
                    ],
                    shopee: "https://shopee.com.my/BOONIE-HAT-RIMBA-ZTAC-i.178104872.18985766965"
                },
                3: {
                    title: "Tacticools Shirt -ZTAC.APPAREL",
                    description: "Premium tactical shirt for comfort and performance in the field. Moisture-wicking fabric with reinforced stitching.",
                    images: [
                        "https://down-my.img.susercontent.com/file/my-11134207-7ras9-mbtgbn9f6j4nb4",
                        "https://down-my.img.susercontent.com/file/my-11134207-7ras9-mbtgbwd3v05y0f",
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasl-mbtgbh6s2hli47",
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasj-mbtgcc84ndsm50"
                    ],
                    shopee: "https://shopee.com.my/Tacticools-Shirt-ZTAC.APPAREL-i.178104872.43757444792"
                },
                4: {
                    title: "Batik Tacticool - TS (Limited Edition)",
                    description: "Limited edition tactical shirt with traditional batik design. Combines cultural heritage with modern functionality.",
                    images: [
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasl-maf6zyfo69pmb2.webp",
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasi-maf6zyfo7oa25a"
                    ],
                    shopee: "https://shopee.com.my/Batik-Tacticool-TS-(Limited-Edition)-i.178104872.43102805888"
                },
                5: {
                    title: "Alpha Pouch - Outdoor (IFAK/GENEREL PURPOSE) Pouch",
                    description: "Versatile outdoor pouch for IFAK or general purpose use. Durable materials with multiple attachment options.",
                    images: [
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasd-mbkslf18la6pbf",
                        "https://down-my.img.susercontent.com/file/my-11134207-7rash-mbks5z542n0pba",
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasm-mbks5z0o94w951"
                    ],
                    shopee: "https://shopee.com.my/Alpha-Pouch-Outdoor-(IFAK-GENEREL-PURPOSE)-Pouch-i.178104872.43256610551"
                },
                6: {
                    title: "ZTC.FXTROT Active Gear Vest â€“ Sesuai untuk Outdoor & Kecergasan",
                    description: "Active gear vest suitable for outdoor & fitness activities. Lightweight yet durable with multiple compartments.",
                    images: [
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasm-m9ls2sxd22udff",
                        "https://down-my.img.susercontent.com/file/my-11134207-7ras9-m9ls2sxd3hetab",
                        "https://down-my.img.susercontent.com/file/my-11134207-7rasa-m9b65nb76vqs7b"
                    ],
                    shopee: "https://shopee.com.my/ZTC.FXTROT-Active-Gear-Vest-%E2%80%93-Sesuai-untuk-Outdoor-Kecergasan-i.178104872.41700453189"
                }
            };

            // Update dots navigation
            function updateDots() {
                dotsContainer.innerHTML = '';
                if (!currentProduct) return;
                
                currentProduct.images.forEach((_, index) => {
                    const dot = document.createElement('span');
                    dot.className = `instagram-dot ${index === currentSlideIndex ? 'active' : ''}`;
                    dot.addEventListener('click', () => showSlide(index));
                    dotsContainer.appendChild(dot);
                });
            }

            // Show specific slide
            function showSlide(index) {
                productSlides.forEach((slide, i) => {
                    if (i === index) {
                        slide.classList.add('active');
                        slide.style.display = 'block';
                    } else {
                        slide.classList.remove('active');
                        slide.style.display = 'none';
                    }
                });
                
                currentSlideIndex = index;
                updateDots();
                
                // Update arrow visibility
                prevBtn.style.display = currentSlideIndex === 0 ? 'none' : 'flex';
                nextBtn.style.display = currentSlideIndex === currentProduct.images.length - 1 ? 'none' : 'flex';
            }

            // View Details button click handler
            viewProductBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const productId = this.getAttribute('data-product');
                    currentProduct = products[productId];
                    
                    if (!currentProduct) return;
                    
                    currentSlideIndex = 0;
                    
                    // Update modal content
                    modalProductTitle.textContent = currentProduct.title;
                    modalProductDesc.textContent = currentProduct.description;
                    shopeeLink.href = currentProduct.shopee;
                    shopeeLink.setAttribute('target', '_blank');
                    
                    // Reset and load slides
                    productSlides.forEach((slide, index) => {
                        slide.style.display = 'none';
                        slide.classList.remove('active');
                        
                        if (currentProduct.images[index]) {
                            const img = slide.querySelector('img');
                            if (img) {
                                img.src = currentProduct.images[index];
                                img.alt = currentProduct.title + ' - Image ' + (index + 1);
                            }
                        }
                    });
                    
                    // Show first slide
                    showSlide(0);
                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                });
            });

            // Navigation handlers
            prevBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                showSlide(currentSlideIndex - 1);
            });

            nextBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                showSlide(currentSlideIndex + 1);
            });

            // Close modal
            closeModal.addEventListener('click', () => {
                modal.classList.remove('active');
                document.body.style.overflow = 'auto';
            });

            // Close when clicking outside modal
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });

            // Ensure Shopee link opens in new tab
            shopeeLink.addEventListener('click', function(e) {
                if (!this.href || this.href === '#') {
                    e.preventDefault();
                }
            });

            // ========== MOBILE MENU ==========
            const hamburger = document.querySelector('.hamburger');
            const mobileMenu = document.querySelector('.mobile-menu');
            
            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                mobileMenu.classList.toggle('active');
            });

            // Close mobile menu when clicking a link
            document.querySelectorAll('.mobile-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    hamburger.classList.remove('active');
                    mobileMenu.classList.remove('active');
                });
            });

            // ========== SMOOTH SCROLLING ==========
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                });
            });

            // ========== FADE-IN ANIMATIONS ==========
            const fadeElements = document.querySelectorAll('.fade-in');

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = 1;
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, { threshold: 0.1 });

            fadeElements.forEach(el => {
                el.style.opacity = 0;
                el.style.transform = 'translateY(20px)';
                el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                observer.observe(el);
            });

            // ========== WHATSAPP FORM ==========
            const whatsappForm = document.getElementById('whatsappForm');
            const customerServiceNumber = "60143242247";

            whatsappForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const phone = document.getElementById('phone').value;
                const message = document.getElementById('message').value;
                
                const formattedPhone = phone.replace(/\D/g, '');
                
                const whatsappMessage = `*New Message from ZTAC Precision Website*%0A%0A` +
                                        `*Name:* ${name}%0A` +
                                        `*Phone:* ${phone}%0A` +
                                        (email ? `*Email:* ${email}%0A` : '') +
                                        `*Message:*%0A${message}`;
                
                window.open(`https://wa.me/${customerServiceNumber}?text=${whatsappMessage}`, '_blank');
                whatsappForm.reset();
            });

            // Phone number formatting
            const phoneInput = document.getElementById('phone');
            phoneInput.addEventListener('input', function(e) {
                let value = this.value.replace(/\D/g, '');
                if (value.startsWith('60')) {
                    value = '+' + value;
                }
                if (value.length > 3) {
                    value = value.substring(0, 3) + ' ' + value.substring(3);
                }
                if (value.length > 7) {
                    value = value.substring(0, 7) + '-' + value.substring(7);
                }
                if (value.length > 11) {
                    value = value.substring(0, 11) + ' ' + value.substring(11);
                }
                this.value = value.substring(0, 15);
            });

            // ========== SECURITY/PROTECTION ==========
            document.addEventListener('contextmenu', (e) => e.preventDefault());

            document.querySelectorAll('img').forEach(img => {
                img.setAttribute('draggable', 'false');
                img.addEventListener('dragstart', (e) => e.preventDefault());
            });

            document.addEventListener('keydown', (e) => {
                if (e.ctrlKey && (e.key === 'u' || e.key === 'U')) e.preventDefault();
                if (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'i')) e.preventDefault();
                if (e.key === 'F12') e.preventDefault();
            });
        });
    </script>
</body>
</html>